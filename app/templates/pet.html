<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="../static/CSS/pet.CSS">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
   
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        :root{
   
            --width: 100%;
    

    }
    #healtHbar{
        height: 60px;
        display: flex;
        align-items: flex-start ;
        justify-content: center;
        top: 0px;
        width: var(--width);
        background-color: none;
    
    }   
    p{
        position: absolute;
        bottom: 10px;
        color: white;
        left: 10px;
        font-weight: bold;
    }
    </style>
      <p id="content-holder">Content is loading ...</p>
    <script type = "text/javascript">
        // let averageScore = 88;
        // let petType = 3;
        let _ = location.href;
            _ = _.slice(-1)
        //   if(averageScore == 88 ){
        // }
        let p = location.search;
            p = p.slice(14, 16)
           


        let health = p;
        let maxHealth = 100;
        let healthPercentage = (health / maxHealth) * 100; 

        var r = document.querySelector(':root');

// Create a function for getting a variable value
        function myFunction_get() {
  // Get the styles (properties and values) for the root
            var rs = getComputedStyle(r);
  // Alert the value of the --blue variable
                
            }
            var contentHolder = document.getElementById('content-holder');
            var newContent = "points";
                point = '{{points}}'
                
            function doSomething()
            {                if(point > 6)
                    point = point - 5
                    healthUpdate()
                    num = point
                    console.log(point)
                    newContent = point;
                    contentHolder.innerHTML = "Points: " + newContent;
                    return point
                
            }
                
                newervar = '{{average_score}}'
                
            function healthUpdate(){

                newervar = parseInt(newervar) + 5
                width(newervar)
                return newervar
            }
          
            
            
            function width(x){
                greg = (x + "%")
                r.style.setProperty('--width', greg);
                fred = parseInt(x)
                if(fred > 77){
                    healtHbar.style.backgroundColor = '#0fff00';
                    r.style.setProperty('background-color', '#0fff00');
                } else if(fred > 33  && fred <= 77){
                    healtHbar.style.backgroundColor = '#fcd36a';
                    r.style.setProperty('background-color', '#fcd36a');
                } else if(fred <= 33){
                  
                    healtHbar.style.backgroundColor = '#e00b0b';
                    r.style.setProperty('background-color', '#e00b0b');
                }
                
            
            }
// Create a function for setting a variable value
            function myFunction_set() {
  // Set the value of variable --blue to another value (in this case "lightblue")
                newvar = ('{{average_score}}' + "%")
               
                r.style.setProperty('--width', newvar);
                
            }

            l = 0;
           
            console.log('{{points}}')

          






            function initcolor(y){
                if(y > 77){
                    healtHbar.style.backgroundColor = '#0fff00';
                    r.style.setProperty('background-color', '#0fff00');
                } else if(y > 33  && y <= 77){
                    healtHbar.style.backgroundColor = '#fcd36a';
                    r.style.setProperty('background-color', '#fcd36a');
                } else if(y <= 33){
                    healtHbar.style.backgroundColor = '#e00b0b';
                    r.style.setProperty('background-color', '#e00b0b');
                }
            }

      
            function displayNextImage(){
           
                if(_ == 1){
                    if(newervar > 77){
                         x = (x === happyfox.length - 1) ? 0 : x + 1;
                        document.getElementById("img").src = happyfox[x];
                         
                    }
                    else if(newervar > 33 &&  newervar <= 77){
                         x = (x === neutralfox.length - 1) ? 0 : x + 1;
                        document.getElementById("img").src = neutralfox[x];
                         
                    }
                    else{
                         x = (x === sadfox.length - 1) ? 0 : x + 1;
                        document.getElementById("img").src = sadfox[x];
                        
                    }
                }
                if(_ == 2){
                    if(newervar > 77){
                         x = (x === happywolf.length - 1) ? 0 : x + 1;
                        document.getElementById("img").src = happywolf[x];
                       
                    }
                    else if(newervar > 33 &&  newervar <= 77){
                         x = (x === neutralwolf.length - 1) ? 0 : x + 1;
                        document.getElementById("img").src = neutralwolf[x];

                    }
                    else{
                         x = (x === sadwolf.length - 1) ? 0 : x + 1;
                        document.getElementById("img").src = sadwolf[x];
                    }
                }
                if(_ == 3){
                    if(newervar > 77){
                         x = (x === happycat.length - 1) ? 0 : x + 1;
                        document.getElementById("img").src = happycat[x];
                    }
                    else if(newervar > 33 &&  newervar <= 77){
                         x = (x === neutralcat.length - 1) ? 0 : x + 1;
                        document.getElementById("img").src = neutralcat[x];
                    }
                    else{
                         x = (x === sadcat.length - 1) ? 0 : x + 1;
                        document.getElementById("img").src = sadcat[x];
                    }
                }
            }
            

        function startTimer() {
            setInterval(displayNextImage, 800);
            myFunction_set()
            initcolor('{{average_score}}')
            contentHolder.innerHTML = "Points: " + '{{points}}';
        }

        var happyfox = [], x = -1;
        var happywolf = [], x = -1;
        var happycat = [], x = -1;

        var neutralfox = [], x = -1;
        var neutralwolf = [], x = -1;
        var neutralcat = [], x = -1;

        var sadfox = [], x = -1;
        var sadwolf = [], x = -1;
        var sadcat = [], x = -1;

            //happy//
        happyfox[0] = "../static/foxidle1.png";
        happyfox[1] = "../static/foxidle2.png";
       
        happywolf[0] = "../static/wolfidle1.png";
        happywolf[1] = "../static/wolfidle2.png";
        
        happycat[0] = "../static/catidle1.png";
        happycat[1] = "../static/catidle2.png";
        //neutral//
        neutralfox[0] = "../static/foxneutral1.png";
        neutralfox[1] = "../static/foxneutral2.png";
       
        neutralwolf[0] = "../static/wolfneutral1.png";
        neutralwolf[1] = "../static/wolfneutral2.png";
        
        neutralcat[0] = "../static/catneutral1.png";
        neutralcat[1] = "../static/catneutral2.png";
        //sad//
        sadfox[0] = "../static/foxsad1.png";
        sadfox[1] = "../static/foxsad2.png";
       
        sadwolf[0] = "../static/wolfsad1.png";
        sadwolf[1] = "../static/wolfsad2.png";
        
        sadcat[0] = "../static/catsad1.png";
        sadcat[1] = "../static/catsad2.png";
        
        
    </script>


</head>
   
        
<body onload = "startTimer()">
    
        <div class="hero">
            
            <div class="george" id = "healtHbar">

            </div>
            <img id="img" src=""/>
            <a data-toggle="tooltip" data-placement="top" title="Delete Pet" href="/pet/delete/{{pet.id}}">
                <img width="40" class="bottom-image" src="../static/can.png">
            </a>
            <input type="button" onclick="doSomething()" value="Feed Me" />
            <h1 class="display-5 text-dark">{{pet.name}}</h1>
            
        <h1>
          
            </h1>
            <h1></h1>
            <br><br>
        </div>
            
          

        
        
   


    




</body>
</html>